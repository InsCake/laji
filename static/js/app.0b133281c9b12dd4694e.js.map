{"version":3,"sources":["webpack:///static/js/app.0b133281c9b12dd4694e.js","webpack:///./src/_router/index.js","webpack:///./src/App.vue","webpack:///App.vue","webpack:///commodity.vue","webpack:///home.vue","webpack:///./src/views/data/commodity.vue","webpack:///./src/views/home/home.vue","webpack:///./src/views/data/commodity.vue?ecfd","webpack:///./src/views/home/home.vue?b75f","webpack:///./src/App.vue?e8f5","webpack:///./src/main.js"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_0_vue___default","n","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_1_vue_router___default","a","use","routes","path","name","component","exports","Component","Object","defineProperty","value","methods","addCommodity","Commodity","AV","extend","commodity","set","save","then","res","console","log","error","addCommodityMaterialMap","mapCommodity","mapMaterial","query","Query","get","material","CommodityMaterialMap","commodityMaterialMap","ifExistId","arr","field","id","i","length","data","commodities","computed","sorted_commodities","this","sort","c1","c2","c1_value","price","material_cost","making_cost","c2_value","mounted","queryManual","_this","include","find","res_manuals","map","res_manual","manual","toJSON","objectId","cur_commodity","quantity","materials","push","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","staticRenderFns","_l","_s","source","toFixed","attrs","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","template","components","App"],"mappings":"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","file":"static/js/app.0b133281c9b12dd4694e.js","sourcesContent":["webpackJsonp([0,2],[\n/* 0 */,\n/* 1 */,\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_router__);\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue___default.a.use(__WEBPACK_IMPORTED_MODULE_1_vue_router___default.a);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = new __WEBPACK_IMPORTED_MODULE_1_vue_router___default.a({\n  routes: [{\n    path: '/',\n    name: 'Home',\n    component: __webpack_require__(10)\n  }, {\n    path: '/commodity',\n    name: 'Commodity',\n    component: __webpack_require__(9)\n  }]\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(8)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(4),\n  /* template */\n  __webpack_require__(13),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  name: 'app'\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  methods: {\n    addCommodity: function addCommodity() {\n      var Commodity = AV.Object.extend('Commodity');\n      var commodity = new Commodity();\n\n      commodity.set('name', '亡者遗物');\n      commodity.set('price', 309);\n      commodity.set('making_cost', 0);\n\n      commodity.save().then(function (res) {\n        console.log(res);\n      }, function (error) {\n        console.error(error);\n      });\n    },\n    addCommodityMaterialMap: function addCommodityMaterialMap() {\n      var mapCommodity = {};\n      var mapMaterial = {};\n\n      var query = new AV.Query('Commodity');\n      query.get('58b237b88d6d810057ec2862').then(function (commodity) {\n        mapCommodity = commodity;\n        query.get('58b233a0b123db0052c97a90').then(function (material) {\n          mapMaterial = material;\n\n          var CommodityMaterialMap = AV.Object.extend('CommodityMaterialMap');\n          var commodityMaterialMap = new CommodityMaterialMap();\n\n          commodityMaterialMap.set('commodity', mapCommodity);\n          commodityMaterialMap.set('material', mapMaterial);\n          commodityMaterialMap.set('quantity', 19);\n\n          commodityMaterialMap.save().then(function (res) {\n            console.log(res);\n          }, function (error) {\n            console.error(error);\n          });\n        });\n      });\n    }\n  }\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  data: function data() {\n    return {\n      commodities: []\n    };\n  },\n\n  computed: {\n    sorted_commodities: function sorted_commodities() {\n      return this.commodities.sort(function (c1, c2) {\n        var c1_value = (c1.price - c1.material_cost - c1.price * 0.1 - c1.making_cost) / c1.price;\n        var c2_value = (c2.price - c2.material_cost - c2.price * 0.1 - c2.making_cost) / c2.price;\n        return c2_value - c1_value;\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.queryManual();\n  },\n\n  methods: {\n    queryManual: function queryManual() {\n      var _this = this;\n\n      var query = new AV.Query('CommodityMaterialMap');\n      query.include('commodity');\n      query.include('material');\n      query.find().then(function (res_manuals) {\n        res_manuals.map(function (res_manual) {\n          var manual = res_manual.toJSON();\n          manual.commodity = res_manual.get('commodity').toJSON();\n          manual.material = res_manual.get('material').toJSON();\n          if (!ifExistId(_this.commodities, 'objectId', manual.commodity.objectId)) {\n            var commodity = manual.commodity;\n            commodity.materials = [manual.material];\n            commodity.material_cost = manual.material.price * manual.quantity;\n            _this.commodities.push(commodity);\n          } else {\n            var cur_commodity = _this.commodities[_this.commodities.length - 1];\n            cur_commodity.material_cost += manual.material.price * manual.quantity;\n            cur_commodity.materials.push(manual.material);\n          }\n        });\n      });\n    }\n  }\n};\n\nfunction ifExistId(arr, field, id) {\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i][field] === id) return true;\n  }\n  return false;\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(5),\n  /* template */\n  __webpack_require__(11),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(7)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(6),\n  /* template */\n  __webpack_require__(12),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', {\n    staticClass: \"commidity\"\n  }, [_c('button', {\n    on: {\n      \"click\": _vm.addCommodity\n    }\n  }, [_vm._v(\"Add commodity\")]), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.addCommodityMaterialMap\n    }\n  }, [_vm._v(\"Add commodity material map\")])])\n},staticRenderFns: []}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', {\n    staticClass: \"home page\"\n  }, _vm._l((_vm.sorted_commodities), function(commodity) {\n    return _c('div', {\n      staticClass: \"card-commodity\"\n    }, [_c('h2', {\n      staticClass: \"commodity-name\"\n    }, [_vm._v(_vm._s(commodity.name) + \"\\n      \"), _c('small', [_vm._v(\" - \" + _vm._s(commodity.source))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"commodity-info\"\n    }, [_c('div', [_vm._v(\"售价: \"), _c('em', [_vm._v(_vm._s(commodity.price))])]), _vm._v(\" \"), _c('div', [_vm._v(\"利润: \"), _c('em', [_vm._v(_vm._s((commodity.price - commodity.material_cost - (commodity.price * 0.1) -\n      commodity.making_cost).toFixed(0)))])]), _vm._v(\" \"), _c('div', [_vm._v(\"利率: \"), _c('em', [_vm._v(_vm._s(((commodity.price - commodity.material_cost - (commodity.price * 0.1) - commodity.making_cost) /\n      commodity.price * 100).toFixed(1)))]), _vm._v(\"%\\n      \")])])])\n  }))\n},staticRenderFns: []}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(2);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue___default.a({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ })\n],[17]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.0b133281c9b12dd4694e.js","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Home',\n      component: require('./../views/home/home')\n    },\n    {\n      path: '/commodity',\n      name: 'Commodity',\n      component: require('./../views/data/commodity')\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/_router/index.js","\n/* styles */\nrequire(\"!!./../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../node_modules/vue-loader/lib/style-rewriter?id=data-v-a1463a6e!./../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!./../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!./../node_modules/vue-loader/lib/template-compiler?id=data-v-a1463a6e!./../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 3\n// module chunks = 0","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<style>\n  *,\n  *::before,\n  *::after {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  }\n  html, body {\n    font-size: 14px;\n    line-height: 1.3;\n    color: #333;\n    font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    text-rendering: optimizeLegibility;\n  }\n  html .pure-g [class *=\"pure-u\"] {\n    font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\n  }\n  ul, ol { list-style: none; }\n  em { font-style: normal; }\n</style>\n\n<script>\n  export default {\n    name: 'app'\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?0ce769ac","<template>\n  <section class=\"commidity\">\n    <button @click=\"addCommodity\">Add commodity</button>\n    <br>\n    <button @click=\"addCommodityMaterialMap\">Add commodity material map</button>\n  </section>\n</template>\n\n<script>\n  /* global AV:true */\n  export default {\n    methods: {\n      addCommodity: function () {\n        var Commodity = AV.Object.extend('Commodity')\n        var commodity = new Commodity()\n\n        commodity.set('name', '亡者遗物')\n        commodity.set('price', 309)\n        commodity.set('making_cost', 0)\n\n        commodity.save().then(function (res) {\n          console.log(res)\n        }, function (error) {\n          console.error(error)\n        })\n      },\n      addCommodityMaterialMap: function () {\n        var mapCommodity = {}\n        var mapMaterial = {}\n\n        var query = new AV.Query('Commodity')\n        query.get('58b237b88d6d810057ec2862').then(function (commodity) {\n          mapCommodity = commodity\n          query.get('58b233a0b123db0052c97a90').then(function (material) {\n            mapMaterial = material\n\n            var CommodityMaterialMap = AV.Object.extend('CommodityMaterialMap')\n            var commodityMaterialMap = new CommodityMaterialMap()\n\n            commodityMaterialMap.set('commodity', mapCommodity)\n            commodityMaterialMap.set('material', mapMaterial)\n            commodityMaterialMap.set('quantity', 19)\n\n            commodityMaterialMap.save().then(function (res) {\n              console.log(res)\n            }, function (error) {\n              console.error(error)\n            })\n          })\n        })\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// commodity.vue?44ae27f6","<template>\n  <section class=\"home page\">\n\n    <div class=\"card-commodity\" v-for=\"commodity in sorted_commodities\">\n      <h2 class=\"commodity-name\">{{ commodity.name }}\n        <small> - {{ commodity.source }}</small>\n      </h2>\n      <div class=\"commodity-info\">\n        <div>售价: <em>{{ commodity.price }}</em></div>\n        <div>利润: <em>{{ (commodity.price - commodity.material_cost - (commodity.price * 0.1) -\n          commodity.making_cost).toFixed(0) }}</em></div>\n        <div>利率: <em>{{ ((commodity.price - commodity.material_cost - (commodity.price * 0.1) - commodity.making_cost) /\n          commodity.price * 100).toFixed(1) }}</em>%\n        </div>\n      </div>\n    </div>\n\n  </section>\n</template>\n\n<style>\n  .card-commodity { padding: 20px 15px; box-shadow: 0 1px 3px -3px rgba(0, 0, 0, .8); }\n  .card-commodity .commodity-name { font-weight: 100; font-size: 30px; color: #111; line-height: 1.1; }\n  .card-commodity .commodity-name > small { font-size: 10px; }\n  .card-commodity .commodity-info { display: flex; color: #999; font-size: 10px; margin-top: 5px; }\n  .card-commodity .commodity-info > div { flex: 1; }\n  .card-commodity .commodity-info > div:not(:first-child) { text-align: right; }\n  .card-commodity .commodity-info > div > em { color: #666; font-size: 14px; }\n</style>\n\n<script>\n  /* global AV:true */\n  export default {\n    data () {\n      return {\n        commodities: []\n      }\n    },\n    computed: {\n      sorted_commodities: function () {\n        return this.commodities.sort((c1, c2) => {\n          var c1_value = (c1.price - c1.material_cost - (c1.price * 0.1) - c1.making_cost) / c1.price;\n          var c2_value = (c2.price - c2.material_cost - (c2.price * 0.1) - c2.making_cost) / c2.price;\n          return c2_value - c1_value;\n        });\n      }\n    },\n    mounted () {\n      this.queryManual();\n    },\n    methods: {\n      queryManual: function () {\n        var query = new AV.Query('CommodityMaterialMap');\n        query.include('commodity');\n        query.include('material');\n        query.find().then(res_manuals => {\n          res_manuals.map(res_manual => {\n            var manual = res_manual.toJSON();\n            manual.commodity = res_manual.get('commodity').toJSON();\n            manual.material = res_manual.get('material').toJSON();\n            if (!ifExistId(this.commodities, 'objectId', manual.commodity.objectId)) {\n              var commodity = manual.commodity;\n              commodity.materials = [manual.material];\n              commodity.material_cost = manual.material.price * manual.quantity;\n              this.commodities.push(commodity);\n            } else {\n              var cur_commodity = this.commodities[this.commodities.length - 1];\n              cur_commodity.material_cost += manual.material.price * manual.quantity;\n              cur_commodity.materials.push(manual.material);\n            }\n          });\n        });\n      }\n    }\n  }\n\n  function ifExistId(arr, field, id) {\n    for (var i = 0; i < arr.length; i++) {\n      if (arr[i][field] === id) return true;\n    }\n    return false;\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// home.vue?42e39d9c","var Component = require(\"!./../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../../../node_modules/vue-loader/lib/selector?type=script&index=0!./commodity.vue\"),\n  /* template */\n  require(\"!!./../../../node_modules/vue-loader/lib/template-compiler?id=data-v-73808231!./../../../node_modules/vue-loader/lib/selector?type=template&index=0!./commodity.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/data/commodity.vue\n// module id = 9\n// module chunks = 0","\n/* styles */\nrequire(\"!!./../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../../../node_modules/vue-loader/lib/style-rewriter?id=data-v-8e752814!./../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./home.vue\")\n\nvar Component = require(\"!./../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../../../node_modules/vue-loader/lib/selector?type=script&index=0!./home.vue\"),\n  /* template */\n  require(\"!!./../../../node_modules/vue-loader/lib/template-compiler?id=data-v-8e752814!./../../../node_modules/vue-loader/lib/selector?type=template&index=0!./home.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/home/home.vue\n// module id = 10\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', {\n    staticClass: \"commidity\"\n  }, [_c('button', {\n    on: {\n      \"click\": _vm.addCommodity\n    }\n  }, [_vm._v(\"Add commodity\")]), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.addCommodityMaterialMap\n    }\n  }, [_vm._v(\"Add commodity material map\")])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-73808231!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/data/commodity.vue\n// module id = 11\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', {\n    staticClass: \"home page\"\n  }, _vm._l((_vm.sorted_commodities), function(commodity) {\n    return _c('div', {\n      staticClass: \"card-commodity\"\n    }, [_c('h2', {\n      staticClass: \"commodity-name\"\n    }, [_vm._v(_vm._s(commodity.name) + \"\\n      \"), _c('small', [_vm._v(\" - \" + _vm._s(commodity.source))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"commodity-info\"\n    }, [_c('div', [_vm._v(\"售价: \"), _c('em', [_vm._v(_vm._s(commodity.price))])]), _vm._v(\" \"), _c('div', [_vm._v(\"利润: \"), _c('em', [_vm._v(_vm._s((commodity.price - commodity.material_cost - (commodity.price * 0.1) -\n      commodity.making_cost).toFixed(0)))])]), _vm._v(\" \"), _c('div', [_vm._v(\"利率: \"), _c('em', [_vm._v(_vm._s(((commodity.price - commodity.material_cost - (commodity.price * 0.1) - commodity.making_cost) /\n      commodity.price * 100).toFixed(1)))]), _vm._v(\"%\\n      \")])])])\n  }))\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-8e752814!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/home/home.vue\n// module id = 12\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-a1463a6e!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 13\n// module chunks = 0","import Vue from 'vue'\nimport App from './App'\nimport router from './_router'\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}