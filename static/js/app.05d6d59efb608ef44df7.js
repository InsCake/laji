webpackJsonp([0,2],[,,function(t,e,o){"use strict";var i=o(1),n=o.n(i),a=o(14),c=o.n(a);n.a.use(c.a),e.a=new c.a({routes:[{path:"/",name:"Home",component:o(10)},{path:"/commodity",name:"Commodity",component:o(9)}]})},function(t,e,o){o(8);var i=o(0)(o(4),o(13),null,null);t.exports=i.exports},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={methods:{addCommodity:function(){var t=AV.Object.extend("Commodity"),e=new t;e.set("name","柔毛"),e.set("price",200),e.set("making_cost",0),e.save().then(function(t){console.log(t)},function(t){console.error(t)})},addCommodityMaterialMap:function(){var t={},e={},o=new AV.Query("Commodity");o.get("58afd1532f301e0068f76b8f").then(function(i){t=i,o.get("58afd1732f301e006cfb052c").then(function(o){e=o;var i=AV.Object.extend("CommodityMaterialMap"),n=new i;n.set("commodity",t),n.set("material",e),n.set("quantity",200),n.save().then(function(t){console.log(t)},function(t){console.error(t)})})})}}}},function(t,e,o){"use strict";function i(t,e,o){for(var i=0;i<t.length;i++)if(t[i][e]===o)return!0;return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{commodities:[]}},computed:{sorted_commodities:function(){return this.commodities.sort(function(t,e){var o=(t.price-t.material_cost-.1*t.price-t.making_cost)/t.price,i=(e.price-e.material_cost-.1*e.price-e.making_cost)/e.price;return i-o})}},mounted:function(){this.queryManual()},methods:{queryManual:function(){var t=this,e=new AV.Query("CommodityMaterialMap");e.include("commodity"),e.include("material"),e.find().then(function(e){e.map(function(e){var o=e.toJSON();if(o.commodity=e.get("commodity").toJSON(),o.material=e.get("material").toJSON(),i(t.commodities,"objectId",o.commodity.objectId)){var n=t.commodities[t.commodities.length-1];n.material_cost+=o.material.price*o.quantity,n.materials.push(o.material)}else{var a=o.commodity;a.materials=[o.material],a.material_cost=o.material.price*o.quantity,t.commodities.push(a)}})})}}}},function(t,e){},function(t,e){},function(t,e,o){var i=o(0)(o(5),o(11),null,null);t.exports=i.exports},function(t,e,o){o(7);var i=o(0)(o(6),o(12),null,null);t.exports=i.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"commidity"},[o("button",{on:{click:t.addCommodity}},[t._v("Add commodity")]),t._v(" "),o("br"),t._v(" "),o("button",{on:{click:t.addCommodityMaterialMap}},[t._v("Add commodity material map")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"home page"},t._l(t.sorted_commodities,function(e){return o("div",{staticClass:"card-commodity"},[o("h2",{staticClass:"commodity-name"},[t._v(t._s(e.name))]),t._v(" "),o("div",{staticClass:"commodity-info"},[o("div",[t._v("售价: "),o("em",[t._v(t._s(e.price))])]),t._v(" "),o("div",[t._v("利润: "),o("em",[t._v(t._s((e.price-e.material_cost-.1*e.price-e.making_cost).toFixed(0)))])]),t._v(" "),o("div",[t._v("利率: "),o("em",[t._v(t._s(((e.price-e.material_cost-.1*e.price-e.making_cost)/e.price*100).toFixed(1)))]),t._v("%\n      ")])])])}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},staticRenderFns:[]}},,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=o.n(i),a=o(3),c=o.n(a),r=o(2);new n.a({el:"#app",router:r.a,template:"<App/>",components:{App:c.a}})}],[17]);
//# sourceMappingURL=app.05d6d59efb608ef44df7.js.map